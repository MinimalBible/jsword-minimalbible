configurations {
	buildJSword
}

task doBuildJSword (type: GradleBuild) { 
	buildFile = 'jsword-stub.gradle'
	tasks = ['clean', 'ivy.check', 'ivy.download', 'ivy.task', 'ivy',
			'init', 'mergeCode', 'compile', 'jar'] //, 'copyJarsToMinimalBible']
	
	ext.outputJar = file('distribution/jsword.jar')
}

task conditionalBuildJSword () {
    if(!file(doBuildJSword.ext.outputJar).exists())
        doBuildJSword
}

artifacts {
	buildJSword(doBuildJSword.ext.outputJar) {
		builtBy conditionalBuildJSword
	}
}
